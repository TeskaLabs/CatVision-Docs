<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>CatVision documentation</title>
  	<meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
  </head>
  <body>

    <header>
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <a href="https://teskalabs.com/">
                <img src="/assets/images/brand.png">
            </a>
          </div>
          <div class="col-md-8">
            <div class="links">
              <a href="https://docs.teskalabs.com/">Docs</a>
              <a href="https://teskalabs.com/blog/">Blog</a>
              <a href="https://teskalabs.com/contact">Contact</a>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="container">
      <div class="col-md-12 pt-3">
        <h1 id="adding-a-catvisionio-sdk-into-an-ios-application">Adding a CatVision.io SDK into an iOS application</h1>

<p>In this section we describe how to integrate a CatVision.io SDK into an iOS application so that an operator can access it remotely.</p>

<h2 id="prerequisities">Prerequisities</h2>

<ul>
  <li>A source code of the iOS application</li>
  <li>XCode (9.0+ is tested)</li>
  <li><em>CatVision.io API Key ID</em> (see <a href="//get-started/api-key.md">Catvision.io API Key</a>)</li>
</ul>

<p><em>Remark about iOS version requirement:</em> Apple added a screen capturing functionality into iOS 11 (autumn 2017). Older versions of iOS do not support screen sharing.</p>

<p><em>Remark about a simulator:</em> As of iOS 11.2, a screen capture is not enabled by Apple in the simulator. You get only a dark blue screen instead of the remote screen image.</p>

<h2 id="add-a-catvisionio-sdk">Add a CatVision.io SDK</h2>

<p>Download <a href="https://s3.amazonaws.com/resources.seacat.mobi/releases/CatVisionIO.framework-17.12.105.zip">CatVision.io SDK for iOS</a> and unzip downloaded ZIP archive. The archive contains <code class="highlighter-rouge">CatVisionIO.framework</code>.</p>

<p><img src="../assets/cvio_ios_download.png" alt="Unzip downloaded CatVision.io SDK for iOS" /></p>

<p>Open your iOS app project with XCode and go to <em>General</em> configuration. Scroll down to “Embedded Binaries” and press “+” button.</p>

<p><img src="../assets/cvio_ios_xcode_1.png" alt="Add CatVision.io SDK in XCode as a Embedded Binary, step 1" /></p>

<p>Select “Add Other …”</p>

<p><img src="../assets/cvio_ios_xcode_2.png" alt="Add CatVision.io SDK in XCode as a Embedded Binary, step 2" /></p>

<p>Select previously prepared <code class="highlighter-rouge">CatVisionIO.framework</code> a press “Open”.</p>

<p><img src="../assets/cvio_ios_xcode_3.png" alt="Add CatVision.io SDK in XCode as a Embedded Binary, step 3" /></p>

<p>Ensure that “Copy items if needed” is checked. It means that <code class="highlighter-rouge">CatVisionIO.framework</code> will be copied into XCode project. Finally press “Finish” to complete integration procedure. Now you may delete the downloaded ZIP archive and unzipped <code class="highlighter-rouge">CatVisionIO.framework</code>.</p>

<p><img src="../assets/cvio_ios_xcode_4.png" alt="Add CatVision.io SDK in XCode as a Embedded Binary, step 4" /></p>

<p>The CatVision.io SDK is now added to your iOS application.</p>

<h2 id="initialization">Initialization</h2>

<p>CatVision.io SDK has to be initialized during an application launch. It is done by adding an initialization one liner into a <code class="highlighter-rouge">didFinishLaunchingWithOptions</code> method of an <code class="highlighter-rouge">AppDelegate</code> class.</p>

<p>Open a source code file of your application delegate, it typically called <code class="highlighter-rouge">AppDelegate.m</code>. Add <code class="highlighter-rouge">#import &lt;CatVisionIO/CatVisionIO.h&gt;</code> into import section in the beginning of the source file and <code class="highlighter-rouge">[CatVision initialize];</code> into <code class="highlighter-rouge">didFinishLaunchingWithOptions</code> method.</p>

<p>See following example:</p>

<pre><code class="language-objs">...
#import &lt;CatVisionIO/CatVisionIO.h&gt;
...

@implementation AppDelegate
    ...

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

        ...
        [CatVision initialize];
        ...
    }

    ...
</code></pre>

<p>Now your app should look like this:</p>

<p><img src="../assets/cvio_ios_xcode_5.png" alt="Add CatVision.io SDK in XCode as a Embedded Binary, step 5" /></p>

<p><em>CatVision.io API Key ID</em> has to be added into the <em>information property list file</em> (or <code class="highlighter-rouge">Info.plist</code> for short) of the iOS app so that the application authenticates properly to <a href="https://app.catvision.io">catvision.io</a>. See <a href="//get-started/api-key.md">Catvision.io API Key</a> for more information of how to get obtain <em>CatVision.io API Key ID</em> if you don’t have one.</p>

<p>Open <code class="highlighter-rouge">Info.plist</code> file of your iOS app and <em>add row</em> from a context menu. The <em>Key</em> is <code class="highlighter-rouge">CVIOApiKeyId</code>, the type is a String and the value is the <em>CatVision.io API Key ID</em>.</p>

<p><img src="../assets/cvio_ios_xcode_6.png" alt="Add CatVision.io SDK in XCode as a Embedded Binary, step 5" /></p>

<h2 id="start-a-screen-sharing">Start a screen sharing</h2>

<p>The application needs to implement start and stop actions of CatVision.io screen sharing. In this example we are going to implement the switch that controls a screen sharing function.</p>

<p>Add a switch to a storyboard, its initial <em>State</em> is <strong>Off</strong>.</p>

<p><img src="../assets/cvio_ios_xcode_7.png" alt="Add a switch to a storyboard" /></p>

<p>Add the following code to the ViewController header (.h):</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@interface</span> <span class="nc">ViewController</span> <span class="o">:</span> <span class="p">...</span>

<span class="p">...</span>
<span class="k">@property</span> <span class="p">(</span><span class="n">weak</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">IBOutlet</span> <span class="n">UISwitch</span> <span class="o">*</span> <span class="n">ScreenShareSwitch</span><span class="p">;</span>
<span class="p">...</span>

<span class="k">@end</span>

</code></pre></div></div>

<p>Link <code class="highlighter-rouge">ScreenShareSwitch</code> outlet with a Switch in a storyboard.</p>

<p>Add the following code to the ViewController implementation class (.m):</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="cp">#import &lt;CatVisionIO/CatVisionIO.h&gt;
</span><span class="p">...</span>

<span class="k">@implementation</span> <span class="nc">ViewController</span>

<span class="p">...</span>
<span class="k">@synthesize</span> <span class="n">ScreenShareSwitch</span><span class="p">;</span>
<span class="p">...</span>

<span class="p">...</span>
<span class="o">-</span> <span class="p">(</span><span class="n">IBAction</span><span class="p">)</span><span class="n">onScreenShareSwitchValueChanged</span><span class="o">:</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">sender</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">([</span><span class="n">ScreenShareSwitch</span> <span class="nf">isOn</span><span class="p">])</span> <span class="p">{</span>
        <span class="p">[[</span><span class="n">CatVision</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">start</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="p">[[</span><span class="n">CatVision</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">stop</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="p">...</span>

<span class="k">@end</span>

</code></pre></div></div>

<p>Link <code class="highlighter-rouge">onScreenShareSwitchValueChanged</code> method with a Switch <em>Value Changed</em> event. Screen sharing is ready. You can compile the application now and run the app.</p>

<p>When screen sharing is started in the mobile apps, you will see the connected client at <a href="https://app.catvision.io">app.catvision.io</a>:</p>

<p><img src="../assets/cvio_ios_done.png" alt="Add CatVision.io SDK in XCode as a Embedded Binary, step 5" /></p>

      </div>
    </main>

    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <span class="text-muted">© 2014-2019 TeskaLabs Ltd.</span>
          </div>
        </div>
      </div>
    </footer>

  </body>
</html>